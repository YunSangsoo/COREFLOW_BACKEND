<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="vacation">
	
	<!-- 기본 연차 정보 조회 -->
	<select id="vacInfo" resultType="com.kh.coreflow.humanmanagement.model.dto.VacationDto$VacationInfo">
		SELECT *
		FROM VACATION_BASIC
	</select>
	
	<!-- 사원 검색 -->
	<select id="memChoice" resultType="com.kh.coreflow.humanmanagement.model.dto.VacationDto$MemberChoice">
		SELECT 
			USER_NO,
			USER_NAME,
			DEP_NAME,
			POS_NAME,
			HIRE_DATE
		FROM MEMBER
		LEFT JOIN DEPARTMENT USING(DEP_ID)
		LEFT JOIN POSITIONS USING(POS_ID)
	</select>
	
	<!-- 검색 사원 휴가 내역 조회 -->
	<select id="memVacation" resultType="com.kh.coreflow.humanmanagement.model.dto.VacationDto$MemberVacation">
		SELECT
			USER_NO,
			VAC_NAME,
			VAC_START,
			VAC_END,
			VAC_AMOUNT,
			STATUS
		FROM VACATION
		LEFT JOIN VACATION_TYPE USING(VAC_CODE)
		LEFT JOIN MEMBER USING(USER_NO)
		LEFT JOIN DEPARTMENT USING(DEP_ID)
		LEFT JOIN POSITIONS USING(POS_ID)
		WHERE USER_NO = #{userNo}
	</select>
</mapper>