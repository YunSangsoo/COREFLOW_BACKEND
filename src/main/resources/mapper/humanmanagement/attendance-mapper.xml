<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="attendance">
	
	<!-- 사원 출퇴근 기록 조회(일별) -->
	<select id="attInfo" resultType="com.kh.coreflow.humanmanagement.model.dto.AttendanceDto$AttendanceInfo">
		SELECT
		    A.ATT_DATE,
		    M.USER_NAME,
		    D.DEP_NAME,
		    P.POS_NAME,
		    A.CHECK_IN_TIME,
		    A.CHECK_OUT_TIME,
		    A.STATUS
		FROM ATTENDANCE A
		LEFT JOIN MEMBER M ON M.USER_NO = A.USER_NO
		LEFT JOIN DEPARTMENT D ON D.DEP_ID = M.DEP_ID
		LEFT JOIN POSITIONS P ON P.POS_ID = M.POS_ID
		WHERE A.ATT_DATE = #{attDate}
		<if test="userNo != null">
			AND A.USER_NO = #{userNo}
		</if>
	</select>
</mapper>